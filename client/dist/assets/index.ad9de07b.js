var se=Object.defineProperty,ne=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var F=(t,s,r)=>s in t?se(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,c=(t,s)=>{for(var r in s||(s={}))$.call(s,r)&&F(t,r,s[r]);if(I)for(var r of I(s))M.call(s,r)&&F(t,r,s[r]);return t},m=(t,s)=>ne(t,ae(s));var T=(t,s)=>{var r={};for(var n in t)$.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&I)for(var n of I(t))s.indexOf(n)<0&&M.call(t,n)&&(r[n]=t[n]);return r};import{c as ie,a as oe,r as d,j as e,b as i,u as y,F as g,L as u,d as ce,t as p,e as S,f as P,g as h,h as B,i as H,k,E as w,l as V,N as z,m as le,R as A,n as f,B as de,o as me,I as ue,P as he,p as pe,q as be}from"./vendor.0e98f639.js";const fe=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}};fe();const J="[auth] register",K="[auth] signin",W="[auth] logout",_="[users] getUsers",Q="[users] active",X="[users] update",Y="[users] delete",ge={uid:"",username:""},ve=(t=ge,{type:s,payload:r})=>{switch(s){case J:t=c(c({},t),r);break;case K:t=c(c({},t),r);break}return t},Ne={},xe=(t=Ne,{type:s,payload:r})=>{var n,a;switch(s){case _:t=m(c({},t),{users:r==null?void 0:r.users});break;case Q:t=m(c({},t),{active:r==null?void 0:r.active});break;case X:t=m(c({},t),{active:void 0,users:(n=t.users)==null?void 0:n.map(o=>o._id===(r==null?void 0:r.aux._id)?r.aux:o)});break;case Y:t=m(c({},t),{users:(a=t.users)==null?void 0:a.filter(o=>o._id!==(r==null?void 0:r.aux._id))});break}return t},O=ie({auth:ve,users:xe}),ke=(t,s)=>s.type===W?O(void 0,s):O(t,s),we=oe({reducer:ke}),ye=t=>{const s=localStorage.getItem("theme")||t,[r,n]=d.exports.useState(s);return d.exports.useEffect(()=>{document.documentElement.setAttribute("data-theme",r),localStorage.setItem("theme",r)},[r]),{theme:r,setTheme:n}},Z=d.exports.createContext({theme:"",setTheme:()=>{}}),Se=({children:t})=>{const{theme:s,setTheme:r}=ye("light");return e(Z.Provider,{value:{theme:s,setTheme:r},children:t})},Re=t=>{const[s,r]=d.exports.useState(t),n=()=>r(t),a=o=>{const l=o.target,{value:v,type:N,checked:x,files:q,name:L}=l;let E=v;switch(N){case"checkbox":E=x;break;case"file":E=q;break}r(re=>m(c({},re),{[L]:E}))};return m(c({value:s},s),{reset:n,handleInputChange:a})},Ie=()=>{const{theme:t,setTheme:s}=d.exports.useContext(Z),r={check:t==="dark"},{check:n,handleInputChange:a}=Re(r);return d.exports.useEffect(()=>{s(n?"dark":"light")},[n,s]),i("div",{className:"navbar bg-base-100 px-5",children:[i("div",{className:"navbar-start",children:[i("div",{className:"dropdown lg:hidden pr-3",children:[e("label",{tabIndex:0,className:"btn btn-ghost",children:e("i",{className:"fa-solid fa-bars text-xl"})}),e("ul",{tabIndex:0,className:"menu menu-compact dropdown-content mt-2 p-2 shadow bg-base-200 rounded-box w-52",children:e(j,{})})]}),e("a",{className:"normal-case text-xl",children:"BreinerTech"})]}),e("div",{className:"navbar-center hidden lg:flex",children:e("ul",{className:"flex-navbar menu menu-horizontal p-0",children:e(j,{})})}),i("div",{className:"navbar-end",children:[i("label",{className:`swap swap-rotate pr-3 ${n&&"swap-active"}`,htmlFor:"checkTheme",children:[e("i",{className:"fa-solid fa-sun text-xl swap-on"}),e("i",{className:"fa-solid fa-moon text-xl swap-off"})]}),e("input",{id:"checkTheme",type:"checkbox",className:"toggle",checked:n,name:"check",onChange:a})]})]})},j=()=>{const{uid:t}=y(s=>s.auth);return i(g,{children:[e("li",{children:e(u,{to:"/",children:"Home"})}),e("li",{children:e(u,{to:"/about",children:"About"})}),e("li",{children:e(u,{to:"/contacts",children:"Contacts"})}),e("li",{children:e(u,{to:"/services",children:"Services"})}),!t&&i("li",{tabIndex:0,children:[e(u,{to:"/login",children:"Auth"}),i("ul",{className:"p-2",children:[e("li",{children:e(u,{to:"/login",children:"Sign IN"})}),e("li",{children:e(u,{to:"/login/register",children:"Register"})})]})]}),t&&e("li",{children:e(u,{to:"/app",children:"App"})})]})},b=t=>(t.method||(t.method="get"),t.headers||(t.headers={}),ce(t)),R="http://localhost:4000/api/v1";console.log(R);const Ue=t=>({type:J,payload:t}),ee=({uid:t,username:s,token:r})=>(r&&localStorage.setItem("token",r),{type:K,payload:{uid:t,username:s}}),U=()=>({type:W}),qe=()=>async t=>{const s=localStorage.getItem("token");if(!s)return t(U());const{data:r,status:n}=await p(b({url:`${R}/session/delete`,method:"delete",data:{},headers:{"x-token":s}}).catch(a=>console.error(a.response.data)));n===200&&r.ok&&(localStorage.removeItem("token"),t(U()))},Le=t=>async s=>{const{status:r,data:n}=await p(b({url:`${R}/users`,method:"post",data:c({},t)}).catch(a=>{console.error("error during fetching",a.response.data)}));if(r===200&&n.ok){const{token:a,uid:o,username:l}=n;if(!a)return;s(Ue({uid:o,username:l,token:a}))}},D=()=>async t=>{const s=localStorage.getItem("token");if(!s)return t(U());const r=await p(b({url:`${R}/refresh`,method:"post",data:{},headers:{"x-token":s}}).catch(n=>{console.error("error during fetching",n.response.data)}));if(r.status===200&&r.data.ok){const{uid:n,username:a,token:o}=r.data;t(ee({uid:n,username:a,token:o}))}},Ee=t=>async s=>{const{status:r,data:n}=await p(b({url:`${R}/login`,method:"post",data:c({},t)}).catch(a=>{console.error("error during fetching",a.response.data)}));if(r===200&&n.ok){const{token:a,uid:o,username:l}=n;if(!a)return;s(ee({uid:o,username:l,token:a}))}},Te=()=>{const t=S();return e(g,{children:e("button",{type:"button",onClick:()=>t(qe()),children:"Logout"})})},Ae=P({username:h().min(2,"username require at least 2 characters").max(7,"username required maximum 7 characters").required("username is required"),password:h().min(8,"password require at least 8 characters").max(12,"password required maximum 12 characters").required("password is required"),email:h().email().required("email is required")}),Pe=P({username:h().min(2,"username require at least 2 characters").max(7,"username required maximum 7 characters").required("username is required"),email:h().email().required("email is required")}),Ce=P({username:h().min(2,"username require at least 2 characters").max(7,"username required maximum 7 characters").required("username is required"),password:h().min(8,"password require at least 8 characters").max(12,"password required maximum 12 characters").required("password is required")}),C="http://localhost:4000/api/v1",Fe=t=>({type:X,payload:{aux:t}}),$e=t=>({type:_,payload:{users:t}}),Me=t=>({type:Q,payload:{active:t}}),Oe=t=>({type:Y,payload:{aux:t}}),G=()=>async t=>{const s=localStorage.getItem("token");if(!s)return t(U());const{status:r,data:n}=await p(b({url:`${C}/users`,method:"get",headers:{"x-token":s}}).catch(a=>console.error(a.response)),"getUsers");r===200&&n.ok&&t($e(n.users))},je=r=>{var n=r,{_id:t}=n,s=T(n,["_id"]);return async a=>{const o=localStorage.getItem("token");if(!t||!o)return;const l=c({_id:t},s),{status:v,data:N}=await p(b({url:`${C}/users/${t}`,method:"put",data:c({},s),headers:{"x-token":o}}).catch(x=>{console.error("error during fetching",x.response.data)}));v===200&&N.ok&&a(Fe(l))}},De=r=>{var n=r,{_id:t}=n,s=T(n,["_id"]);return async(a,o)=>{const l=localStorage.getItem("token"),{uid:v}=o().auth;if(!t||!l||v===t)return;const N=c({_id:t},s),{status:x,data:q}=await p(b({url:`${C}/users/${t}`,method:"delete",headers:{"x-token":l}}).catch(L=>console.error(L.response)));x===200&&q.ok&&a(Oe(N))}},Ge=()=>e("div",{className:"flex justify-center items-center mt-12",children:e("div",{className:"w-96 bg-base-200 shadow-md rounded px-8 pt-6 pb-8 mb-4",children:e(te,{})})}),te=()=>{const{active:t}=y(o=>o.users);let s={username:"",password:"",email:""};const[r,n]=d.exports.useState(s),a=S();return d.exports.useEffect(()=>{t&&n(m(c({},t),{password:""}))},[t]),e(B,{initialValues:r,onSubmit:o=>{a(t?je(o):Le(o))},validationSchema:t?Pe:Ae,enableReinitialize:!0,validateOnMount:!0,children:i(H,{children:[i("div",{className:"form-control mb-4",children:[e("label",{className:"label text-gray font-bold",children:"Username"}),e(k,{type:"text",name:"username",placeholder:"username",className:"input input-bordered input-md "}),e("br",{}),e(w,{name:"username",component:"span",className:"text-sm italic"})]}),!t&&i("div",{className:"form-control mb-6",children:[e("label",{className:"label text-gray font-bold",children:"Password"}),e(k,{type:"password",name:"password",placeholder:"*************",className:"input input-bordered input-md "}),e("br",{}),e(w,{name:"password",component:"span",className:"text-sm italic"})]}),i("div",{className:"form-control mb-6",children:[e("label",{className:"label text-gray font-bold",children:"Email"}),e(k,{type:"email",name:"email",placeholder:"abc@example.com",className:"input input-bordered input-md "}),e("br",{}),e(w,{name:"email",component:"span",className:"text-sm italic"})]}),e("button",{type:"submit",className:"btn btn-primary w-full",children:t?e("span",{children:"Update"}):e("span",{children:"Register"})})]})})},Be=()=>i("div",{children:[e("input",{type:"checkbox",id:"my-modal-4",className:"modal-toggle"}),e("label",{htmlFor:"my-modal-4",className:"modal cursor-pointer",children:i("label",{className:"modal-box relative",htmlFor:"",children:[e("h3",{className:"text-lg font-bold",children:"Add new User"}),e("div",{className:"py-4",children:e(te,{})})]})})]}),He=()=>{const t=S(),{users:s}=y(r=>r.users);return d.exports.useEffect(()=>{t(G())},[t,G]),e("div",{className:"overflow-x-auto",children:i("table",{className:"table w-full",children:[e("thead",{children:i("tr",{children:[e("th",{children:"ID"}),e("th",{children:"Username"}),e("th",{children:"email"}),e("th",{children:"Options"})]})}),e("tbody",{children:s&&s.map(r=>i("tr",{children:[e("td",{children:r._id}),e("td",{children:r.username}),e("td",{children:r.email}),i("td",{children:[e("label",{htmlFor:"my-modal-4",onClick:()=>t(Me(r)),children:e("i",{className:"fa-solid fa-file-pen modal-button btn btn-ghost"})}),e("i",{className:"fa-solid fa-trash  btn btn-ghost",onClick:()=>t(De(m(c({},r),{password:""})))})]})]},r._id))})]})})},Ve=()=>i("div",{className:"flex justify-between w-full  pt-5 ",children:[e("div",{className:"card w-full bg-base-200 shadow-xl mr-2",children:i("div",{className:"card-body",children:[i("div",{className:"flex justify-between",children:[e("h2",{className:"card-title",children:"USER LIST!"}),e("label",{htmlFor:"my-modal-4",children:e("i",{className:"modal-button fas fa-plus btn btn-ghost"})})]}),e("p",{children:"This are all registered users in this app!"}),e(He,{})]})}),e(Be,{})]}),ze=()=>{const{username:t}=y(s=>s.auth);return i("div",{className:"w-full px-5 pt-5",children:[i("div",{className:"w-full flex justify-between",children:[i("h1",{children:["Hello there! ",e("strong",{children:t.toUpperCase()})]}),e(Te,{})]}),e("span",{children:"This is an app to practice with (progressive web application) PWA"}),e(Ve,{})]})},Je=({isAuth:t,children:s})=>{let r=V();return t?e(z,{to:"/app",state:{from:r},replace:!0}):s},Ke=({isAuth:t,children:s})=>{let r=V();return t?s:e(z,{to:"/login",state:{from:r},replace:!0})},We=()=>i("div",{children:[e("h1",{children:"Are you lost? ..."}),e(u,{to:"/",children:"Go to home page"})]}),_e=()=>e("div",{children:e("h1",{children:"About"})}),Qe=()=>e("div",{children:e("h1",{children:"Contacts"})}),Xe=()=>e("div",{children:e("h1",{children:"Home"})}),Ye=()=>e("div",{children:e("h1",{children:"Services"})}),Ze=[{index:!0,element:e(Xe,{})},{path:"/about",element:e(_e,{})},{path:"/contacts",element:e(Qe,{})},{path:"/services",element:e(Ye,{})},{path:"*",element:e(We,{})}],et=()=>{const t=le(Ze);return e(g,{children:t})},tt=()=>e(g,{children:e(et,{})}),rt=()=>{const t={username:"",password:"",email:""},s=S();return e("div",{className:"flex justify-center items-center mt-12",children:e("div",{className:"w-96 bg-base-200 shadow-md rounded px-8 pt-6 pb-8 mb-4",children:e(B,{initialValues:t,onSubmit:r=>{s(Ee(r))},validationSchema:Ce,children:i(H,{children:[i("div",{className:"form-control mb-4",children:[e("label",{className:"label text-gray font-bold",children:"Username"}),e(k,{type:"text",name:"username",placeholder:"username",className:"input input-bordered input-md "}),e("br",{}),e(w,{name:"username",component:"span",className:"text-sm italic"})]}),i("div",{className:"form-control mb-6",children:[e("label",{className:"label text-gray font-bold",children:"Password"}),e(k,{type:"password",name:"password",placeholder:"*************",className:"input input-bordered input-md "}),e("br",{}),e(w,{name:"password",component:"span",className:"text-sm italic"})]}),e("button",{type:"submit",className:"btn  w-full",children:"SIGN IN"})]})})})})},st=()=>i(A,{children:[e(f,{index:!0,element:e(rt,{})}),e(f,{path:"register",element:e(Ge,{})})]}),nt=()=>e(g,{children:e(st,{})}),at=()=>i("footer",{className:"footer p-10 bg-base-200 text-base-content",style:{position:"absolute",bottom:0},children:[i("div",{children:[e("i",{className:"fa-solid fa-rocket text-5xl p-3"}),i("p",{children:["BreinerTech Ltd.",e("br",{}),"Providing reliable knowledge since 2019"]})]}),i("div",{children:[e("span",{className:"footer-title",children:"Services"}),e("a",{className:"link link-hover",children:"Branding"}),e("a",{className:"link link-hover",children:"Design"}),e("a",{className:"link link-hover",children:"Marketing"}),e("a",{className:"link link-hover",children:"Advertisement"})]}),i("div",{children:[e("span",{className:"footer-title",children:"Company"}),e("a",{className:"link link-hover",children:"About us"}),e("a",{className:"link link-hover",children:"Contact"}),e("a",{className:"link link-hover",children:"Jobs"}),e("a",{className:"link link-hover",children:"Press kit"})]}),i("div",{children:[e("span",{className:"footer-title",children:"Legal"}),e("a",{className:"link link-hover",children:"Terms of use"}),e("a",{className:"link link-hover",children:"Privacy policy"}),e("a",{className:"link link-hover",children:"Cookie policy"})]})]}),it=()=>{const{uid:t}=y(s=>s.auth);return e("div",{className:"h-full",children:i(de,{children:[e(Ie,{}),i(A,{children:[e(f,{path:"/*",element:e(tt,{})}),e(f,{path:"/login/*",element:e(Je,{isAuth:!!t,children:e(nt,{})})}),e(f,{path:"/app/*",element:e(Ke,{isAuth:!!t,children:e(A,{children:e(f,{index:!0,element:e(ze,{})})})})})]}),e(at,{})]})})},ot=({children:t})=>{const{promiseInProgress:s}=me(),r=S();return d.exports.useEffect(()=>{r(D())},[r,D]),e(g,{children:s?e("div",{className:"spinner",children:e("div",{children:e(ue,{color:"grey",width:"200px"})})}):t})},ct=()=>e("div",{children:e(he,{store:we,children:e(Se,{children:e(ot,{children:e(it,{})})})})});pe.render(e(be.StrictMode,{children:e(ct,{})}),document.getElementById("root"));
